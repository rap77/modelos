<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="T_SECCIONES_BU" directorySegmentName="seg_0" id="A54AE00B-CE2A-31BC-5A2C-B1FF90F8DE8D">
<sourceConnName>ces.local</sourceConnName>
<sourceObjSchema>CES</sourceObjSchema>
<sourceObjName>T_SECCIONES_BU</sourceObjName>
<createdBy>padron</createdBy>
<createdTime>2019-07-05 12:28:59 UTC</createdTime>
<ownerDesignName>CES-FUNDAUC</ownerDesignName>
<actions>INSERT, UPDATE, DELETE</actions>
<body>DECLARE&lt;br/&gt;tmpVar NUMBER;&lt;br/&gt;/******************************************************************************&lt;br/&gt;   NAME:       T_SECCIONES_BU&lt;br/&gt;   PURPOSE:    &lt;br/&gt;&lt;br/&gt;   REVISIONS:&lt;br/&gt;   Ver        Date        Author           Description&lt;br/&gt;   ---------  ----------  ---------------  ------------------------------------&lt;br/&gt;   1.0        16/07/2015      Rafael Padron       1. Created this trigger.&lt;br/&gt;&lt;br/&gt;   NOTES:&lt;br/&gt;&lt;br/&gt;   Automatically available Auto Replace Keywords:&lt;br/&gt;      Object Name:     T_SECCIONES_BU&lt;br/&gt;      Sysdate:         16/07/2015&lt;br/&gt;      Date and Time:   16/07/2015, 9:53:23, and 16/07/2015 9:53:23&lt;br/&gt;      Username:        Rafael Padron (set in TOAD Options, Proc Templates)&lt;br/&gt;      Table Name:      SECCIONES (set in the &quot;New PL/SQL Object&quot; dialog)&lt;br/&gt;      Trigger Options:  (set in the &quot;New PL/SQL Object&quot; dialog)&lt;br/&gt;******************************************************************************/&lt;br/&gt;BEGIN&lt;br/&gt;   tmpVar := 0;&lt;br/&gt;   &lt;br/&gt;   if INSERTING then&lt;br/&gt;       INSERT INTO CES.SECCIONES_HIS (&lt;br/&gt;       CANT_ACTUAL, CEDULA_PROF, FEC_INICIO, &lt;br/&gt;       HORARIO, ID_EDIF, ID_METODO, &lt;br/&gt;       ID_SALON, ID_SECCION, MODALIDAD, &lt;br/&gt;       NIVEL, PERIODO, STATUS, &lt;br/&gt;       TOPE,FECHA_ACCION,TIPO_ACCION) &lt;br/&gt;        VALUES ( :NEW.CANT_ACTUAL,&lt;br/&gt;        :NEW.CEDULA_PROF,&lt;br/&gt;     :NEW.FEC_INICIO ,&lt;br/&gt;     :NEW.HORARIO ,&lt;br/&gt;     :NEW.ID_EDIF ,&lt;br/&gt;     :NEW.ID_METODO ,&lt;br/&gt;     :NEW.ID_SALON ,&lt;br/&gt;     :NEW.ID_SECCION ,&lt;br/&gt;     :NEW.MODALIDAD ,&lt;br/&gt;     :NEW.NIVEL ,&lt;br/&gt;     :NEW.PERIODO,&lt;br/&gt;     :NEW.STATUS ,&lt;br/&gt;     :NEW.TOPE,&lt;br/&gt;     SYSDATE,&lt;br/&gt;     &apos;INSERT&apos; );&lt;br/&gt;   elsif UPDATING then&lt;br/&gt;      if (:OLD.FEC_INICIO=:NEW.FEC_INICIO AND :OLD.ID_METODO=:NEW.ID_METODO AND :OLD.ID_SECCION=:NEW.ID_SECCION) THEN&lt;br/&gt;      UPDATE CES.SECCIONES_HIS SET&lt;br/&gt;       CANT_ACTUAL  = :NEW.CANT_ACTUAL,&lt;br/&gt;       CEDULA_PROF  = :NEW.CEDULA_PROF,&lt;br/&gt;       FECHA_ACCION = SYSDATE,&lt;br/&gt;       FEC_INICIO   = :NEW.FEC_INICIO,&lt;br/&gt;       HORARIO      = :NEW.HORARIO,&lt;br/&gt;       ID_EDIF      = :NEW.ID_EDIF,&lt;br/&gt;       ID_METODO    = :NEW.ID_METODO,&lt;br/&gt;       ID_SALON     = :NEW.ID_SALON,&lt;br/&gt;       ID_SECCION   = :NEW.ID_SECCION,&lt;br/&gt;       MODALIDAD    = :NEW.MODALIDAD,&lt;br/&gt;       NIVEL        = :NEW.NIVEL,&lt;br/&gt;       PERIODO      = :NEW.PERIODO,&lt;br/&gt;       STATUS       = :NEW.STATUS,&lt;br/&gt;       TIPO_ACCION  = &apos;UPDATE&apos;,&lt;br/&gt;       TOPE         = :NEW.TOPE;&lt;br/&gt;      else&lt;br/&gt;       INSERT INTO CES.SECCIONES_HIS (&lt;br/&gt;       CANT_ACTUAL, CEDULA_PROF, FEC_INICIO, &lt;br/&gt;       HORARIO, ID_EDIF, ID_METODO, &lt;br/&gt;       ID_SALON, ID_SECCION, MODALIDAD, &lt;br/&gt;       NIVEL, PERIODO, STATUS, &lt;br/&gt;       TOPE,FECHA_ACCION,TIPO_ACCION) &lt;br/&gt;        VALUES ( :NEW.CANT_ACTUAL,&lt;br/&gt;        :NEW.CEDULA_PROF,&lt;br/&gt;     :OLD.FEC_INICIO ,&lt;br/&gt;     :OLD.HORARIO ,&lt;br/&gt;     :OLD.ID_EDIF ,&lt;br/&gt;     :OLD.ID_METODO ,&lt;br/&gt;     :OLD.ID_SALON ,&lt;br/&gt;     :OLD.ID_SECCION ,&lt;br/&gt;     :OLD.MODALIDAD ,&lt;br/&gt;     :OLD.NIVEL ,&lt;br/&gt;     :OLD.PERIODO ,&lt;br/&gt;     :OLD.STATUS ,&lt;br/&gt;     :OLD.TOPE,&lt;br/&gt;     SYSDATE,&lt;br/&gt;     &apos;UPDATE&apos;  );&lt;br/&gt;     end if;&lt;br/&gt;   else&lt;br/&gt;       INSERT INTO CES.SECCIONES_HIS (&lt;br/&gt;       CANT_ACTUAL, CEDULA_PROF, FEC_INICIO, &lt;br/&gt;       HORARIO, ID_EDIF, ID_METODO, &lt;br/&gt;       ID_SALON, ID_SECCION, MODALIDAD, &lt;br/&gt;       NIVEL, PERIODO, STATUS, &lt;br/&gt;       TOPE,FECHA_ACCION,TIPO_ACCION) &lt;br/&gt;        VALUES ( :NEW.CANT_ACTUAL,&lt;br/&gt;        :NEW.CEDULA_PROF,&lt;br/&gt;     :OLD.FEC_INICIO ,&lt;br/&gt;     :OLD.HORARIO ,&lt;br/&gt;     :OLD.ID_EDIF ,&lt;br/&gt;     :OLD.ID_METODO ,&lt;br/&gt;     :OLD.ID_SALON ,&lt;br/&gt;     :OLD.ID_SECCION ,&lt;br/&gt;     :OLD.MODALIDAD ,&lt;br/&gt;     :OLD.NIVEL ,&lt;br/&gt;     :OLD.PERIODO ,&lt;br/&gt;     :OLD.STATUS ,&lt;br/&gt;     :OLD.TOPE,&lt;br/&gt;     SYSDATE,&lt;br/&gt;     &apos;DELETE&apos;  );&lt;br/&gt;   end if;&lt;br/&gt;   &lt;br/&gt;&lt;br/&gt;   EXCEPTION&lt;br/&gt;     WHEN OTHERS THEN&lt;br/&gt;       -- Consider logging the error and then re-raise&lt;br/&gt;       DBMS_OUTPUT.put_line(SQLERRM);&lt;br/&gt;       RAISE;&lt;br/&gt;END T_SECCIONES_BU;</body>
<triggerTime>BEFORE</triggerTime>
<owner>97FD16BA-5F38-1D61-ED7A-CBFAE1D2218C</owner>
<table>1C48BDBD-7B21-A8B6-53B0-559179BE2211</table>
</TriggerOraclev10g>